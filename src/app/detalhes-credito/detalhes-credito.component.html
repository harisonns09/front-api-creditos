<div class="container">
  <h1 class="title">Detalhes do Crédito</h1>

  <div class="acoes">
    <button class="btn btn-voltar" (click)="voltar()">← Voltar</button>
    <button class="btn btn-pdf" (click)="imprimirNotaFiscal(credito.numeroCredito)">
      📄 Gerar Nota Fiscal (PDF)
    </button>
  </div>

  <ng-container *ngIf="credito as c; else carregando">
    <div class="detalhes-cartao">
      <div class="linha" *ngFor="let item of [
          { label: 'Número do Crédito', valor: c.numeroCredito },
          { label: 'Número da NFS-e', valor: c.numeroNfse },
          { label: 'Data de Constituição', valor: c.dataConstituicao },
          { label: 'Valor ISSQN', valor: 'R$ ' + (c.valorIssqn | number:'1.2-2') },
          { label: 'Tipo de Crédito', valor: c.tipoCredito },
          { label: 'Simples Nacional', valor: c.simplesNacional === true || c.simplesNacional === 'true' ? 'Sim' : 'Não' },
          { label: 'Alíquota', valor: (+c.aliquota | number:'1.2-2') + '%' },
          { label: 'Valor Faturado', valor: 'R$ ' + (+c.valorFaturado | number:'1.2-2') },
          { label: 'Valor Dedução', valor: 'R$ ' + (c.valorDeducao | number:'1.2-2') },
          { label: 'Base de Cálculo', valor: 'R$ ' + (c.baseCalculo | number:'1.2-2') }
        ]">
        <span class="label">{{ item.label }}:</span>
        <span class="valor">{{ item.valor }}</span>
      </div>
    </div>
  </ng-container>

  <ng-template #carregando>
    <p>Carregando crédito...</p>
  </ng-template>
</div>
